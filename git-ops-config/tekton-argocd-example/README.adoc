== Tekton with ArgoCD

=== Create secrets for SSH GitHub

This is one way to create a SSH key, that will be added to GitHub.

----
ssh-keygen -t rsa -b 4096 -C "tekton@shikanga.co.uk"
# save as tekton / tekton.pub
# add tekton.pub contents to GitHub
----

==== Create secret YAML from ssh key contents

----
cat tekton | base64 -w 0; echo
----

Followed by

----
cat > tekton-git-ssh-secret.yaml << EOM
apiVersion: v1
kind: Secret
metadata:
  name: git-ssh-key
  namespace: tekton-pipelines
  annotations:
    tekton.dev/git-0: github.com
type: kubernetes.io/ssh-auth
data:
  ssh-privatekey: <base64 data>
EOM
----

Then execute

----
kubectl apply -f tekton-git-ssh-secret.yaml
----

=== Create secrets for Docker Registry

----
cat ~/.docker/config.json | base64 -w 0; echo
----

Followed by

----
cat > regsecret.yaml << EOM
kind: Secret
apiVersion: v1
metadata:
  name: regsecret
data:
  .dockercfg: <base 64 data>
type: kubernetes.io/dockercfg
EOM
----

Then execute

----
kubectl apply -n tekton-pipelines -f regsecret.yaml
----


== Download & Install Istio on the Raspberry Pi 4+

. Download and extract the latest release automatically
----
curl -L https://istio.io/downloadIstio | sh -
----

[start=2]
. Move to the Istio package directory. For example, if the package is `istio-1.12.1:`
----
cd istio-1.12.1
----

[start=3]
. Add the istioctl client to your path (Linux or macOS):
----
export PATH=$PWD/bin:$PATH
----

[start=4]
. Install the arm-64 version of Istio with the command below:
----
istioctl install --set hub=docker.io/querycapistio
----